<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pok√©mon ‚ö°Ô∏è EPIC BATTLE SIMULATOR (FIXED)</title>

    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /*
        ========================================
        üé® ESTILOS POK√âMON √âPICOS Y RETRO
        ========================================
        */
        :root {
            --color-principal: #3b4cca;
            --color-acento: #ffde00;
            --color-sith: #cc0000;
            --color-fondo-app: #e0e0e0;
            --color-borde-grueso: #111;
            --fuente-retro: 'Press Start 2P', cursive;
            --fuente-contenido: 'Roboto', sans-serif;
        }

        body {
            font-family: var(--fuente-contenido);
            background: radial-gradient(circle at top left, var(--color-sith) 0%, var(--color-principal) 100%);
            color: var(--color-borde-grueso);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            background-color: var(--color-acento);
            color: var(--color-principal);
            padding: 20px 0;
            width: 100%;
            text-align: center;
            border-bottom: 8px ridge var(--color-borde-grueso);
            margin-bottom: 20px;
        }

        header h1 {
            font-family: var(--fuente-retro);
            font-size: 2.8em;
            text-shadow: 4px 4px var(--color-sith);
            margin: 0;
            letter-spacing: 2px;
        }

        main {
            background-color: var(--color-fondo-app);
            padding: 30px;
            border: 10px solid var(--color-borde-grueso);
            box-shadow: 20px 20px 0px rgba(0, 0, 0, 0.6);
            max-width: 1400px;
            width: 95%;
            transition: all 0.5s;
        }

        /* --------------------------------------- */
        /* 1. SECCI√ìN DE LISTADO Y B√öSQUEDA */
        /* --------------------------------------- */
        .seccion-control {
            border: 4px solid var(--color-borde-grueso);
            padding: 20px;
            margin-bottom: 30px;
            background-color: white;
            box-shadow: 5px 5px 0px #aaa;
        }

        .controles-busqueda {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: center;
        }

        #buscador-input {
            flex-grow: 1;
            padding: 12px;
            border: 3px solid var(--color-borde-grueso);
            font-size: 1.1em;
            font-family: var(--fuente-contenido);
        }

        .btn-accion {
            padding: 12px 20px;
            background-color: var(--color-principal);
            color: white;
            border: 4px outset var(--color-borde-grueso);
            cursor: pointer;
            font-family: var(--fuente-retro);
            font-size: 0.8em;
            transition: all 0.1s;
        }

        .btn-accion:active {
            transform: translateY(1px);
            border: 4px inset var(--color-borde-grueso);
        }

        .grid-contenedor {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 18px;
            max-height: 450px;
            overflow-y: auto;
            border: 2px solid var(--color-borde-grueso);
            padding: 15px;
            background-color: #eee;
        }

        .tarjeta-pokemon {
            background-color: white;
            border: 3px solid var(--color-borde-grueso);
            padding: 12px;
            text-align: center;
            cursor: pointer;
            box-shadow: 2px 2px 0px var(--color-borde-grueso);
        }

        .tarjeta-pokemon:hover {
            background-color: var(--color-acento);
            box-shadow: 4px 4px 0px var(--color-sith);
        }

        .tarjeta-pokemon.seleccionado {
            border: 5px solid var(--color-sith);
            background-color: #ffbaba;
        }

        .tarjeta-pokemon img {
            width: 90px;
            height: 90px;
            image-rendering: pixelated;
            margin-bottom: 5px;
        }

        .tarjeta-pokemon p {
            font-size: 0.9em;
            margin: 0;
            text-transform: capitalize;
            font-family: var(--fuente-retro);
            line-height: 1.2;
        }

        /* --------------------------------------- */
        /* 2. SECCI√ìN DE COMBATE INTERACTIVO */
        /* --------------------------------------- */
        .seccion-combate {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .arena-combate {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            min-height: 300px;
            border: 6px solid var(--color-borde-grueso);
            background: #b8b8b8;
            padding: 20px;
            background-image: linear-gradient(to bottom, #777 50%, #555 50%);
        }

        .pokebox {
            width: 30%;
            text-align: center;
        }

        #pokemon1-box { order: 1; margin-bottom: 50px; }
        #pokemon2-box { order: 3; margin-top: 50px; }

        .pokebox h3 {
            font-family: var(--fuente-retro);
            color: var(--color-borde-grueso);
            font-size: 1em;
            text-transform: capitalize;
            background-color: white;
            border: 2px solid var(--color-borde-grueso);
            padding: 5px;
        }

        .pokebox img {
            width: 150px;
            height: 150px;
            image-rendering: pixelated;
        }

        /* HUD: Barras de HP y Nombre */
        .pokemon-hud {
            width: 100%;
            border: 4px solid var(--color-borde-grueso);
            background-color: white;
            padding: 5px;
            text-align: left;
            margin-bottom: 10px;
        }

        .hp-bar {
            background-color: red;
            height: 18px;
            width: 95%;
            margin: 5px auto;
            border: 2px solid var(--color-borde-grueso);
            overflow: hidden;
        }

        .hp-fill {
            height: 100%;
            background-color: limegreen;
            transition: width 0.8s ease-in-out, background-color 0.8s;
        }

        /* Controles de Batalla y Log */
        .battle-interface {
            display: flex;
            border: 6px solid var(--color-borde-grueso);
            min-height: 150px;
        }

        /* Log de Combate (Estilo Game Boy) */
        #log-combate {
            width: 60%;
            background-color: #222;
            color: limegreen;
            padding: 15px;
            font-family: var(--fuente-retro);
            font-size: 0.65em;
            white-space: pre-wrap;
            overflow-y: auto;
            border-right: 3px solid var(--color-borde-grueso);
        }

        /* Botones de Ataque (User Input) */
        #controles-ataque {
            width: 40%;
            padding: 10px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            background-color: #fce883;

        }

        .btn-ataque {
            padding: 10px;
            background-color: var(--color-principal);
            color: white;
            border: 3px outset var(--color-borde-grueso);
            cursor: pointer;
            font-family: var(--fuente-retro);
            font-size: 0.7em;
            text-transform: capitalize;
        }

        .btn-ataque:disabled {
            background-color: #888;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .btn-ataque:hover:not(:disabled) {
            background-color: var(--color-sith);
        }

        .cargando {
            text-align: center;
            font-family: var(--fuente-retro);
            padding: 20px;
            color: var(--color-principal);
        }

    </style>
</head>
<body>

    <header>
        <h1>POK√âMON RUMBLE</h1>
        <p>üéÆ Interfaz Interactiva de Batalla 1.0</p>
    </header>

    <main>

        <div class="seccion-control">
            <h2>Selecciona 2 Combatientes (P1 y P2)</h2>
            <div class="controles-busqueda">
                <input type="text" id="buscador-input" placeholder="Buscar por nombre o ID (Ej: Bulbasaur, 1)" onkeypress="if(event.key === 'Enter') buscarPokemon()">
                <button class="btn-accion" onclick="buscarPokemon()">BUSCAR</button>
                <button class="btn-accion" onclick="reiniciarSeleccion()">REINICIAR SELECCI√ìN</button>
            </div>

            <div id="cargando" class="cargando">Cargando datos POK√âDEX...</div>
            <div id="resultados-contenedor" class="grid-contenedor">
                </div>

            <div class="controles-busqueda" style="justify-content: center; margin-top: 15px;">
                <button id="prev-btn" class="btn-accion" onclick="cambiarPagina(-1)" disabled>‚Üê P√°g</button>
                <span id="pagina-info">P√°gina 1</span>
                <button id="next-btn" class="btn-accion" onclick="cambiarPagina(1)" disabled>P√°g ‚Üí</button>
            </div>
        </div>

        <div class="seccion-control seccion-combate">
            <h2>¬°Es Hora de la Batalla!</h2>

            <div class="arena-combate">
                <div id="pokemon1-box" class="pokebox">
                    <div class="pokemon-hud" style="text-align: right;">
                        <span id="p1-nombre-hud" style="font-family: var(--fuente-retro); font-size: 0.8em; text-transform: capitalize;">P1: [Vacio]</span>
                        <div class="hp-bar"><div id="p1-hp" class="hp-fill" style="width: 100%;"></div></div>
                    </div>
                    <img id="p1-img" src="" alt="Pok√©mon 1" style="display: none;">
                </div>

                <div id="pokemon2-box" class="pokebox">
                    <div class="pokemon-hud">
                        <span id="p2-nombre-hud" style="font-family: var(--fuente-retro); font-size: 0.8em; text-transform: capitalize;">P2: [Vacio]</span>
                        <div class="hp-bar"><div id="p2-hp" class="hp-fill" style="width: 100%;"></div></div>
                    </div>
                    <img id="p2-img" src="" alt="Pok√©mon 2" style="display: none;">
                </div>
            </div>

            <div class="battle-interface">
                <pre id="log-combate">Sistema: Listo. Elige dos Pok√©mon de la lista superior para comenzar.</pre>

                <div id="controles-ataque">
                    <button class="btn-ataque" id="btn-ataque-1" onclick="ejecutarTurno(1)" disabled>Ataque 1</button>
                    <button class="btn-ataque" id="btn-ataque-2" onclick="ejecutarTurno(2)" disabled>Ataque 2</button>
                    <button class="btn-ataque" id="btn-ataque-3" onclick="ejecutarTurno(3)" disabled>Ataque 3</button>
                    <button class="btn-ataque" id="btn-ataque-4" onclick="ejecutarTurno(4)" disabled>Ataque 4</button>
                    <button class="btn-accion" id="btn-iniciar-combate" style="grid-column: span 2; margin-top: 5px;" disabled onclick="prepararCombate()">¬°INICIAR COMBATE!</button>
                </div>
            </div>

            <div id="estado-turno" style="text-align: center; margin-top: 10px; font-family: var(--fuente-retro); color: var(--color-sith);"></div>
        </div>

    </main>

    <script>

        // ========================================
        // üíª L√ìGICA DE LA POKEAPI Y COMBATE INTERACTIVO (FIXED)
        // ========================================

        const API_URL = 'https://pokeapi.co/api/v2/';
        const itemsPorPagina = 12;

        let paginaActual = 1;
        let busquedaActual = '';
        let seleccionados = {};

        let combateActivo = false;
        let pokemonJugador = null;
        let pokemonCPU = null;

        // Datos de Movimientos Gen√©ricos (para simulaci√≥n)
        const movimientosSimulados = [
            { name: "Placaje", power: 40, type: "Normal" },
            { name: "Lanzallamas", power: 90, type: "Special" },
            { name: "Rayo Hielo", power: 90, type: "Special" },
            { name: "Terremoto", power: 100, type: "Physical" }
        ];

        // Elementos DOM
        const resultadosContenedor = document.getElementById('resultados-contenedor');
        const cargandoDiv = document.getElementById('cargando');
        const logCombate = document.getElementById('log-combate');
        const controlesAtaqueDiv = document.getElementById('controles-ataque');
        const btnIniciarCombate = document.getElementById('btn-iniciar-combate');
        const estadoTurnoDiv = document.getElementById('estado-turno');
        const paginaInfoSpan = document.getElementById('pagina-info');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');


        // --- MANEJO DE LA API ---

        async function obtenerListaPokemon(offset, limit) {
            try {
                const respuesta = await fetch(`${API_URL}pokemon?offset=${offset}&limit=${limit}`);
                return await respuesta.json();
            } catch (error) {
                logCombate.textContent += "\n[ERROR] Fallo al cargar la lista Pok√©mon. Revisa tu conexi√≥n.";
                return { results: [], count: 0 };
            }
        }

        async function obtenerDetallePokemon(urlOrName) {
            try {
                const url = urlOrName.startsWith('http') ? urlOrName : `${API_URL}pokemon/${urlOrName.toLowerCase()}`;
                const respuesta = await fetch(url);
                if (!respuesta.ok) throw new Error('Pok√©mon no encontrado.');
                const data = await respuesta.json();

                const stats = {};
                data.stats.forEach(s => {
                    // Solo obtener las estad√≠sticas clave para la simulaci√≥n
                    stats[s.stat.name] = s.base_stat;
                });

                // Usar 'versions' para obtener sprites de GameBoy si es posible, sino los defaults
                const img_front = data.sprites.front_default;
                const img_back = data.sprites.back_default;

                return {
                    id: data.id,
                    name: data.name,
                    img_front: img_front,
                    img_back: img_back,
                    stats: {
                        hp: stats.hp || 50,
                        attack: stats.attack || 50,
                        defense: stats.defense || 50,
                        speed: stats.speed || 50
                    },
                    moves: movimientosSimulados.map((m, i) => ({ ...m, id: i + 1 }))
                };
            } catch (error) {
                // logCombate.textContent += `\n[ERROR] ${error.message}`; // Comentado para evitar spam
                return null;
            }
        }

        // --- INTERFAZ ---

        async function cargarDatos() {
            resultadosContenedor.innerHTML = '';
            cargandoDiv.style.display = 'block';

            let lista = { results: [], count: 0 };

            if (busquedaActual) {
                const detalle = await obtenerDetallePokemon(busquedaActual);
                if (detalle) lista.results.push({ url: '', name: detalle.name });
            } else {
                const offset = (paginaActual - 1) * itemsPorPagina;
                lista = await obtenerListaPokemon(offset, itemsPorPagina);
            }

            const detallesPromises = lista.results.map(p => obtenerDetallePokemon(p.url || p.name));
            const detalles = (await Promise.all(detallesPromises)).filter(d => d !== null);

            renderizarPokemon(detalles);
            actualizarPaginacion(lista.previous, lista.next, lista.count);

            cargandoDiv.style.display = 'none';
        }

        function renderizarPokemon(detalles) {
            resultadosContenedor.innerHTML = '';
            detalles.forEach(p => {
                const tarjeta = document.createElement('div');
                tarjeta.className = 'tarjeta-pokemon';
                tarjeta.id = `pokemon-${p.id}`;
                tarjeta.innerHTML = `
                    <img src="${p.img_front}" alt="${p.name}">
                    <p>#${p.id} ${p.name}</p>
                    <p style="font-size:0.7em;">HP: ${p.stats.hp} | ATK: ${p.stats.attack}</p>
                `;
                tarjeta.onclick = () => seleccionarPokemon(p);
                if ((seleccionados[1] && seleccionados[1].id === p.id) || (seleccionados[2] && seleccionados[2].id === p.id)) {
                     tarjeta.classList.add('seleccionado');
                }
                resultadosContenedor.appendChild(tarjeta);
            });
        }

        function actualizarPaginacion(previousUrl, nextUrl, count) {
            prevBtn.disabled = !previousUrl || busquedaActual;
            nextBtn.disabled = !nextUrl || busquedaActual;

            const totalPaginas = Math.ceil(count / itemsPorPagina);
            paginaInfoSpan.textContent = busquedaActual ? "Resultado √önico" : `P√°g ${paginaActual} de ${totalPaginas || 1}`;
        }

        function cambiarPagina(delta) {
            if (busquedaActual) return;
            paginaActual += delta;
            cargarDatos();
        }

        function buscarPokemon() {
            const input = document.getElementById('buscador-input').value.trim();
            if (input) {
                busquedaActual = input;
                paginaActual = 1;
            } else {
                busquedaActual = '';
            }
            cargarDatos();
        }

        function seleccionarPokemon(pokemon) {
            if (combateActivo) return;

            const card = document.getElementById(`pokemon-${pokemon.id}`);
            const isSelected = card.classList.contains('seleccionado');

            if (isSelected) {
                if (seleccionados[1] && seleccionados[1].id === pokemon.id) delete seleccionados[1];
                else if (seleccionados[2] && seleccionados[2].id === pokemon.id) delete seleccionados[2];
                card.classList.remove('seleccionado');
                logCombate.textContent += `\n> ${pokemon.name.toUpperCase()} deseleccionado.`;
            } else {
                if (!seleccionados[1]) {
                    seleccionados[1] = pokemon;
                    logCombate.textContent += `\n> ${pokemon.name.toUpperCase()} (P1) elegido.`;
                } else if (!seleccionados[2]) {
                    seleccionados[2] = pokemon;
                    logCombate.textContent += `\n> ${pokemon.name.toUpperCase()} (P2) elegido. ¬°Listo!`;
                } else {
                    logCombate.textContent += "\n[ADVERTENCIA] Ya tienes dos Pok√©mon. Reinicia la selecci√≥n.";
                    return;
                }
                card.classList.add('seleccionado');
            }

            actualizarArena();
        }

        function reiniciarSeleccion() {
            seleccionados = {};
            combateActivo = false;
            document.querySelectorAll('.tarjeta-pokemon.seleccionado').forEach(el => el.classList.remove('seleccionado'));
            logCombate.textContent = "Sistema: Selecci√≥n reiniciada. Elige dos nuevos Pok√©mon para la batalla.";
            estadoTurnoDiv.textContent = "";
            actualizarArena();

            // Asegurar que el bot√≥n vuelva al modo INICIAR
            btnIniciarCombate.textContent = "¬°INICIAR COMBATE!";
            btnIniciarCombate.onclick = prepararCombate;
        }

        function actualizarArena() {
            const p1 = seleccionados[1];
            const p2 = seleccionados[2];

            // P1 Box
            document.getElementById('p1-nombre-hud').textContent = p1 ? `P1: ${p1.name}` : "P1: [Vacio]";
            document.getElementById('p1-img').src = p1 ? p1.img_back || p1.img_front : "";
            document.getElementById('p1-img').style.display = p1 ? 'block' : 'none';
            document.getElementById('p1-hp').style.width = '100%';

            // P2 Box
            document.getElementById('p2-nombre-hud').textContent = p2 ? `P2: ${p2.name}` : "P2: [Vacio]";
            document.getElementById('p2-img').src = p2 ? p2.img_front : "";
            document.getElementById('p2-img').style.display = p2 ? 'block' : 'none';
            document.getElementById('p2-hp').style.width = '100%';

            btnIniciarCombate.disabled = !(p1 && p2) || combateActivo;

            if (!combateActivo) {
                 for(let i = 1; i <= 4; i++) {
                     document.getElementById(`btn-ataque-${i}`).disabled = true;
                     document.getElementById(`btn-ataque-${i}`).textContent = `Ataque ${i}`;
                 }
            }
        }

        // --- L√ìGICA DEL COMBATE POR TURNOS ---

        function prepararCombate() {
            if (!seleccionados[1] || !seleccionados[2]) return;

            pokemonJugador = { ...seleccionados[1], currentHp: seleccionados[1].stats.hp };
            pokemonCPU = { ...seleccionados[2], currentHp: seleccionados[2].stats.hp };

            combateActivo = true;
            btnIniciarCombate.disabled = true;
            logCombate.textContent = `\nüî• ¬°COMIENZA EL COMBATE! üî•`;
            logCombate.textContent += `\n${pokemonJugador.name.toUpperCase()} (HP: ${pokemonJugador.currentHp}) vs ${pokemonCPU.name.toUpperCase()} (HP: ${pokemonCPU.currentHp})`;

            pokemonJugador.moves.forEach((move, index) => {
                document.getElementById(`btn-ataque-${index + 1}`).textContent = move.name;
            });

            // Desactivar onclick temporalmente para evitar doble click
            btnIniciarCombate.onclick = null;

            // Determinar qui√©n empieza (mayor Velocidad)
            const jugadorEmpieza = pokemonJugador.stats.speed >= pokemonCPU.stats.speed;

            if (jugadorEmpieza) {
                logCombate.textContent += `\n${pokemonJugador.name.toUpperCase()} es m√°s r√°pido. ¬°T√∫ empiezas!`;
                turnoJugador();
            } else {
                logCombate.textContent += `\n${pokemonCPU.name.toUpperCase()} es m√°s r√°pido. ¬°Turno del rival!`;
                turnoCPU();
            }
        }

        function turnoJugador() {
            estadoTurnoDiv.textContent = `TU TURNO: Elige un ataque para ${pokemonJugador.name.toUpperCase()}`;
            for(let i = 1; i <= 4; i++) {
                document.getElementById(`btn-ataque-${i}`).disabled = false;
            }
        }

        function turnoCPU() {
            estadoTurnoDiv.textContent = `TURNO RIVAL: Esperando ataque de ${pokemonCPU.name.toUpperCase()}`;
            for(let i = 1; i <= 4; i++) {
                document.getElementById(`btn-ataque-${i}`).disabled = true;
            }

            setTimeout(() => {
                if (!combateActivo) return;

                const moveIndex = Math.floor(Math.random() * pokemonCPU.moves.length);
                const movimientoCPU = pokemonCPU.moves[moveIndex];

                const da√±o = calcularDa√±o(pokemonCPU, pokemonJugador, movimientoCPU.power);
                pokemonJugador.currentHp -= da√±o;
                pokemonJugador.currentHp = Math.max(0, pokemonJugador.currentHp);

                logCombate.textContent += `\n> ${pokemonCPU.name.toUpperCase()} us√≥ ${movimientoCPU.name}. Hizo ${da√±o} de da√±o. (HP: ${pokemonJugador.currentHp})`;
                actualizarHP(pokemonJugador, 'p1');

                if (pokemonJugador.currentHp <= 0) {
                    finalizarCombate(pokemonCPU, pokemonJugador);
                } else {
                    turnoJugador();
                }
            }, 1500);
        }

        function ejecutarTurno(moveId) {
            if (!combateActivo) return;

            // 1. Ejecutar ataque del Jugador
            const movimientoJugador = pokemonJugador.moves.find(m => m.id === moveId);

            const da√±o = calcularDa√±o(pokemonJugador, pokemonCPU, movimientoJugador.power);
            pokemonCPU.currentHp -= da√±o;
            pokemonCPU.currentHp = Math.max(0, pokemonCPU.currentHp);

            logCombate.textContent += `\n> ¬°${pokemonJugador.name.toUpperCase()} us√≥ ${movimientoJugador.name}! Hizo ${da√±o} de da√±o. (HP: ${pokemonCPU.currentHp})`;
            actualizarHP(pokemonCPU, 'p2');

            // 2. Verificar fin de combate
            if (pokemonCPU.currentHp <= 0) {
                finalizarCombate(pokemonJugador, pokemonCPU);
            } else {
                turnoCPU();
            }
        }

        // --- UTILIDADES ---

        function calcularDa√±o(atacante, defensor, basePower) {
            const nivel = 50;
            const factor = (2 * nivel + 10) / 250;
            const randomFactor = 0.85 + Math.random() * 0.15;

            const defenseStat = defensor.stats.defense || 50; // Fallback seguro
            const attackStat = atacante.stats.attack || 50; // Fallback seguro

            const damage = Math.floor(factor * (attackStat / defenseStat) * basePower * randomFactor) + 2;

            return Math.max(1, damage);
        }

        function actualizarHP(pokemon, prefix) {
            const maxHp = pokemon.stats.hp;
            const currentHp = pokemon.currentHp;
            const hpPercent = (currentHp / maxHp) * 100;

            const hpFill = document.getElementById(`${prefix}-hp`);
            hpFill.style.width = `${hpPercent}%`;

            // Cambio de color en la barra de vida por da√±o
            if (hpPercent < 20) hpFill.style.backgroundColor = 'red';
            else if (hpPercent < 50) hpFill.style.backgroundColor = 'yellow';
            else hpFill.style.backgroundColor = 'limegreen';

            logCombate.scrollTop = logCombate.scrollHeight;
        }

        function finalizarCombate(ganador, perdedor) {
            combateActivo = false;
            estadoTurnoDiv.textContent = "FIN DE LA BATALLA";
            logCombate.textContent += `\n\nüí• ${perdedor.name.toUpperCase()} se debilit√≥.`;
            logCombate.textContent += `\nüèÜ ¬°EL GANADOR ES ${ganador.name.toUpperCase()}! üèÜ`;

            for(let i = 1; i <= 4; i++) {
                document.getElementById(`btn-ataque-${i}`).disabled = true;
            }
            btnIniciarCombate.disabled = false;
            btnIniciarCombate.textContent = "¬°NUEVA BATALLA!";
            btnIniciarCombate.onclick = reiniciarSeleccion;

            document.querySelectorAll('.tarjeta-pokemon').forEach(el => el.style.pointerEvents = 'auto');
        }

        // --- INICIALIZACI√ìN ---

        document.addEventListener('DOMContentLoaded', () => {
            cargarDatos();
            actualizarArena();
        });

    </script>
</body>
</html>
